<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>

<body>

</body>
<script>
  const objArr = [{
      "RightName": "开店管理",
      "RightCode": "00",
      "FatherCode": "",
      "Level": "1"
    },
    {
      "RightName": "企业管理",
      "RightCode": "0000",
      "FatherCode": "00",
      "Level": "2"
    },
    {
      "RightName": "门店管理",
      "RightCode": "0001",
      "FatherCode": "00",
      "Level": "2"
    },
    {
      "RightName": "数据分析",
      "RightCode": "01",
      "FatherCode": "",
      "Level": "1"
    },
    {
      "RightName": "日活跃统计",
      "RightCode": "0100",
      "FatherCode": "01",
      "Level": "2"
    },
    {
      "RightName": "活跃分析",
      "RightCode": "0101",
      "FatherCode": "01",
      "Level": "2"
    },
    {
      "RightName": "付费授权",
      "RightCode": "02",
      "FatherCode": "",
      "Level": "1"
    },
    {
      "RightName": "缴费管理",
      "RightCode": "0200",
      "FatherCode": "02",
      "Level": "2"
    },
    {
      "RightName": "对账中心",
      "RightCode": "0201",
      "FatherCode": "02",
      "Level": "2"
    },
    {
      "RightName": "权限管理",
      "RightCode": "03",
      "FatherCode": "",
      "Level": "1"
    },
    {
      "RightName": "角色管理",
      "RightCode": "0300",
      "FatherCode": "03",
      "Level": "2"
    },
    {
      "RightName": "用户管理",
      "RightCode": "0301",
      "FatherCode": "03",
      "Level": "2"
    },
    {
      "RightName": "用户-子1",
      "RightCode": "030100",
      "FatherCode": "0301",
      "Level": "3"
    },
    {
      "RightName": "用户-子2",
      "RightCode": "030101",
      "FatherCode": "0301",
      "Level": "3"
    },
    {
      "RightName": "用户-子2 -子子1",
      "RightCode": "03010100",
      "FatherCode": "030101",
      "Level": "4"
    },
    {
      "RightName": "用户-子2 -子子1-子子子1",
      "RightCode": "0301010000",
      "FatherCode": "03010100",
      "Level": "5"
    }
  ];

  const result = (roleTree) => {
    let updateArr = [];
    roleTree.forEach((outItem, index, arr) => {
      // 最外层
      if (outItem.FatherCode === '') updateArr.push(outItem);
      arr.forEach((inItem) => {
        if (outItem.RightCode === inItem.FatherCode) {
          outItem.children = outItem.children || [];
          outItem.children.push(inItem);
        }
      });
    });
    return updateArr;
  }
  let arr = result(objArr)

  var str = ``;
  const getChildren = (obj, strs) => {

    obj.forEach((item) => {
      str += `-- ${item.RightName} \n`
      if (item[strs]) {
        item[strs].forEach(element => {
          str += `  -- ${element.RightName} \n`
          getChildren(element[strs], strs)
        })
      }

    })
    console.log(str)
  }

  getChildren(arr, 'children')
</script>

</html>
